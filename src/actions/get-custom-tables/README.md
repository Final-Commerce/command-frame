# getCustomTables

Retrieves a list of all custom tables from the parent application's local database.

## Parameters

This command does not accept any parameters.

## Response

### `GetCustomTablesResponse`

```typescript
interface GetCustomTablesResponse {
    success: boolean;
    customTables: CFCustomTable[];
    timestamp: string;
}
```

#### `success` (boolean)

Indicates whether the custom tables were successfully retrieved.

#### `customTables` (CFCustomTable[])

An array of custom table objects. Each custom table has the following structure:

```typescript
type CFCustomTable = BaseEntity & {
    name: string;
    description?: string;
    metadata?: Array<{
        key: string;
        value: any;
    }>;
}
```

**Fields:**

- `_id` (string): Unique identifier for the custom table
- `name` (string): The name of the custom table
- `description` (string, optional): A description of the custom table
- `metadata` (Array, optional): Custom metadata as key-value pairs
- `createdAt` (string): Creation timestamp
- `updatedAt` (string): Last update timestamp

#### `timestamp` (string)

ISO 8601 timestamp string (e.g., `"2024-01-01T00:00:00.000Z"`) indicating when the response was generated by the handler.

## Usage

```typescript
import { command } from '@final-commerce/command-frame';
```

## Usage Examples

### Get All Custom Tables

Retrieve all custom tables:

```typescript
import { command } from '@final-commerce/command-frame';

const result = await command.getCustomTables();

console.log('Custom Tables:', result.customTables);
result.customTables.forEach(table => {
    console.log(`Table: ${table.name} (ID: ${table._id})`);
});
```

## Error Handling

If the retrieval fails, the handler will throw an error. This is rare and typically indicates a system-level issue with the database.

## Real Data Examples

### Example Response

```json
{
  "success": true,
  "customTables": [
    {
      "_id": "65a1b2c3d4e5f6g7h8i9j0k1",
      "name": "customer_preferences",
      "description": "Store customer preferences and settings",
      "createdAt": "2024-01-01T10:00:00.000Z",
      "updatedAt": "2024-01-01T10:00:00.000Z",
      "metadata": [
        {
          "key": "category",
          "value": "customer_data"
        }
      ]
    },
    {
      "_id": "65a1b2c3d4e5f6g7h8i9j0k2",
      "name": "loyalty_points",
      "description": "Track customer loyalty points",
      "createdAt": "2024-01-02T14:30:00.000Z",
      "updatedAt": "2024-01-02T14:30:00.000Z"
    }
  ],
  "timestamp": "2024-01-15T12:00:00.000Z"
}
```

## Notes

- Custom tables are stored in the local IndexedDB database (LokiJS)
- Custom tables are synchronized with the central MongoDB database via station-sync
- Use `getCustomTableFields` to retrieve the field definitions for a specific table
- Use `getCustomTableData` to retrieve the actual data stored in a custom table

