# getRoles

Retrieves a list of all roles and their associated permissions for the current company from the parent application's backend.

## Parameters

### `GetRolesParams`

```typescript
interface GetRolesParams {
    // No parameters needed - roles are fetched for the current company automatically
}
```

## Response

### `GetRolesResponse`

```typescript
interface GetRolesResponse {
    roles: CFActiveUserRole[];
    success: boolean;
    timestamp: string;
}
```

#### `roles` (CFActiveUserRole[])

Array of role objects. Each role includes its name, company ID, and a full list of granular permissions grouped by category and sub-category.

**Tip:** You can import the `CFActiveUserRole` type directly from the library:
```typescript
import { type CFActiveUserRole } from '@final-commerce/command-frame';
```

See the [Real Data Examples](#real-data-examples) section below for actual role object structures.

#### `success` (boolean)

Indicates whether the request was successful.

#### `timestamp` (string)

ISO 8601 timestamp string (e.g., `"2024-01-01T00:00:00.000Z"`) indicating when the response was generated by the handler.

## Usage

```typescript
import { command } from '@final-commerce/command-frame';
```

## Usage Examples

### Basic Query

Get all roles for the current company:

```typescript
import { command } from '@final-commerce/command-frame';

const result = await command.getRoles();
console.log(`Found ${result.roles.length} roles`);
```

### Check Permissions for a Specific Role

```typescript
import { command } from '@final-commerce/command-frame';

const result = await command.getRoles();

const adminRole = result.roles.find(r => r.name.toLowerCase() === 'admin');
const canIssueRefunds = adminRole?.permissions.find(p => p.name === 'issue_refunds')?.value;
console.log('Admin can issue refunds:', canIssueRefunds);
```

### List All Hub Access Permissions

```typescript
import { command } from '@final-commerce/command-frame';

const result = await command.getRoles();

for (const role of result.roles) {
    const hubPerms = role.permissions.filter(p => p.category === 'hub_access' && p.value);
    console.log(`${role.name}: ${hubPerms.map(p => p.name).join(', ')}`);
}
```

## Real Data Examples

### Example Response

```json
{
  "roles": [
    {
      "id": "691df9c6c478bada1fb23d0c",
      "_id": "691df9c6c478bada1fb23d0c",
      "companyId": "691df9c4c478bada1fb23bff",
      "name": "admin",
      "permissions": [
        {
          "category": "hub_access",
          "name": "taxes",
          "value": true,
          "subCategory": "store_management",
          "permissionId": "664759347eefffe8aba84476"
        },
        {
          "category": "station_access",
          "name": "issue_refunds",
          "value": true,
          "subCategory": "pos_actions",
          "permissionId": "6645f719ee8498efff5c4ae4"
        },
        {
          "category": "station_access",
          "name": "cash_drawer",
          "value": true,
          "subCategory": "station_home",
          "permissionId": "6723b2aeae5f176f7539d8a8"
        }
      ]
    }
  ],
  "success": true,
  "timestamp": "2025-12-04T19:25:50.817Z"
}
```

## Notes

- The permissions array includes all possible permissions for the role, with the `value` boolean indicating whether that specific permission is granted (`true`) or denied (`false`)
- Each permission includes `category`, `subCategory`, `name`, `value`, and optionally `permissionId`
