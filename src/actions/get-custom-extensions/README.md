# getCustomExtensions

Retrieves a list of all custom extensions from the parent application's local database. Custom extensions are additional features or modules that can be installed in the Final Commerce ecosystem.

## Parameters

This command does not accept any parameters.

## Response

### `GetCustomExtensionsResponse`

```typescript
interface GetCustomExtensionsResponse {
    success: boolean;
    customExtensions: CustomExtension[];
    timestamp: string;
}
```

#### `success` (boolean)

Indicates whether the custom extensions were successfully retrieved.

#### `customExtensions` (CustomExtension[])

An array of custom extension objects. Each custom extension has the following structure:

```typescript
type CustomExtension = BaseEntity & {
    _id: string;
    label: string;
    description?: string;
    backgroundUrl?: string;
    gallery?: string[];
    category: string;
    short_description?: string;
    long_description?: string;
    main_image?: string;
    price: string;
    isDeleted: boolean;
    createdAt: string;
    updatedAt: string;
    __v: number;
    website?: string;
}
```

**Fields:**

- `_id` (string): Unique identifier for the custom extension
- `label` (string): The display name of the extension
- `description` (string, optional): A brief description of the extension
- `category` (string): The category this extension belongs to
- `short_description` (string, optional): A short description for listings
- `long_description` (string, optional): A detailed description
- `main_image` (string, optional): URL to the main image/icon for the extension
- `backgroundUrl` (string, optional): URL to a background image
- `gallery` (string[], optional): Array of image URLs for the extension gallery
- `price` (string): Price of the extension (formatted as string, e.g., "$10.00")
- `website` (string, optional): Website URL for the extension
- `isDeleted` (boolean): Whether the extension has been marked as deleted
- `createdAt` (string): Creation timestamp
- `updatedAt` (string): Last update timestamp
- `__v` (number): Version key (MongoDB internal)

#### `timestamp` (string)

ISO 8601 timestamp string (e.g., `"2024-01-01T00:00:00.000Z"`) indicating when the response was generated by the handler.

## Usage

```typescript
import { command } from '@final-commerce/command-frame';
```

## Usage Examples

### Get All Custom Extensions

Retrieve all available custom extensions:

```typescript
import { command } from '@final-commerce/command-frame';

const result = await command.getCustomExtensions();

console.log('Custom Extensions:', result.customExtensions);
result.customExtensions.forEach(extension => {
    console.log(`Extension: ${extension.label} - ${extension.category}`);
});
```

### Filter Active Extensions

Get only active (non-deleted) extensions:

```typescript
import { command } from '@final-commerce/command-frame';

const result = await command.getCustomExtensions();

const activeExtensions = result.customExtensions.filter(ext => !ext.isDeleted);

console.log('Active Extensions:', activeExtensions);
```

### Group Extensions by Category

Organize extensions by their categories:

```typescript
import { command } from '@final-commerce/command-frame';

const result = await command.getCustomExtensions();

const extensionsByCategory = result.customExtensions.reduce((acc, ext) => {
    if (!acc[ext.category]) {
        acc[ext.category] = [];
    }
    acc[ext.category].push(ext);
    return acc;
}, {} as Record<string, typeof result.customExtensions>);

console.log('Extensions by Category:', extensionsByCategory);
```

### Display Extension Gallery

Access extension images and gallery:

```typescript
import { command } from '@final-commerce/command-frame';

const result = await command.getCustomExtensions();

result.customExtensions.forEach(extension => {
    console.log(`Extension: ${extension.label}`);
    
    if (extension.main_image) {
        console.log(`Main Image: ${extension.main_image}`);
    }
    
    if (extension.gallery && extension.gallery.length > 0) {
        console.log(`Gallery (${extension.gallery.length} images):`, extension.gallery);
    }
});
```

### Find Extension by Label

Search for a specific extension:

```typescript
import { command } from '@final-commerce/command-frame';

const result = await command.getCustomExtensions();

const extension = result.customExtensions.find(
    ext => ext.label === 'Loyalty Program Extension'
);

if (extension) {
    console.log('Found extension:', extension);
    console.log('Description:', extension.long_description || extension.short_description);
}
```

## Error Handling

If the retrieval fails, the handler will throw an error. This is rare and typically indicates a system-level issue with the database.

## Real Data Examples

### Example Response

```json
{
  "success": true,
  "customExtensions": [
    {
      "_id": "65a1b2c3d4e5f6g7h8i9j0k1",
      "label": "Loyalty Program Extension",
      "description": "Add a loyalty points system to your POS",
      "category": "Customer Management",
      "short_description": "Loyalty points tracking",
      "long_description": "A comprehensive loyalty program that allows you to track customer points, offer rewards, and increase customer retention.",
      "main_image": "https://example.com/images/loyalty-extension.png",
      "backgroundUrl": "https://example.com/images/loyalty-bg.jpg",
      "gallery": [
        "https://example.com/images/loyalty-1.png",
        "https://example.com/images/loyalty-2.png"
      ],
      "price": "$29.99",
      "website": "https://loyalty-extension.example.com",
      "isDeleted": false,
      "createdAt": "2024-01-01T10:00:00.000Z",
      "updatedAt": "2024-01-10T14:30:00.000Z",
      "__v": 0
    },
    {
      "_id": "65a1b2c3d4e5f6g7h8i9j0k2",
      "label": "Inventory Analytics",
      "description": "Advanced inventory tracking and reporting",
      "category": "Analytics",
      "short_description": "Real-time inventory insights",
      "long_description": "Get detailed insights into your inventory with real-time tracking, low stock alerts, and comprehensive reporting.",
      "main_image": "https://example.com/images/inventory-extension.png",
      "price": "$49.99",
      "isDeleted": false,
      "createdAt": "2024-01-05T08:00:00.000Z",
      "updatedAt": "2024-01-05T08:00:00.000Z",
      "__v": 0
    }
  ],
  "timestamp": "2024-01-15T12:00:00.000Z"
}
```

## Notes

- Custom extensions are stored in the local IndexedDB database (LokiJS)
- Custom extensions are synchronized with the central MongoDB database via station-sync
- Each extension may have associated custom tables (use `getCustomExtensionCustomTables` to retrieve them)
- Extensions marked with `isDeleted: true` are typically hidden from the user interface but remain in the database
- The `price` field is a string representation and may need parsing for numerical operations

